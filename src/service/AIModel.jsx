import { GoogleGenerativeAI } from "@google/generative-ai";

  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate travel plan for location: La Vegas for 3 days for family with a moderate budget, give me a hotels list options with hotel name, address, price hotel image, url, geo coordinates, ratings, description, and suggest itinerary with placename, place details, image url, geo coordinates, ticket pricing, rating, time travel each of the location for 3 days with each day plan with best time to visit in JSON FORMAT"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"trip_details\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 days\",\n    \"budget\": \"Moderate\",\n    \"travelers\": \"Family\"\n  },\n  \"hotel_options\": [\n    {\n      \"name\": \"Excalibur Hotel & Casino\",\n      \"address\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n       \"price_range\": \"$100 - $250 per night\",\n      \"image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/1d/87/4d/58/excalibur-hotel-casino.jpg\",\n      \"url\": \"https://www.excalibur.com/\",\n      \"geo_coordinates\": {\n        \"latitude\": 36.0997,\n        \"longitude\": -115.1745\n      },\n       \"rating\": 4,\n      \"description\": \"A castle-themed hotel with family-friendly amenities, including multiple pools, a medieval-themed dinner show, and an arcade. Located on the south end of the Strip.\"\n    },\n    {\n      \"name\": \"The LINQ Hotel + Experience\",\n      \"address\": \"3535 S Las Vegas Blvd, Las Vegas, NV 89109\",\n       \"price_range\": \"$150 - $300 per night\",\n      \"image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/1d/58/8b/d7/the-linq-hotel-experience.jpg\",\n      \"url\": \"https://www.caesars.com/linq\",\n       \"geo_coordinates\": {\n        \"latitude\": 36.1179,\n        \"longitude\": -115.1696\n      },\n      \"rating\": 4.2,\n      \"description\": \"Modern hotel with a lively atmosphere, featuring the High Roller observation wheel, numerous restaurants, and shops. Centrally located on the Strip.\"\n    },\n    {\n      \"name\": \"Flamingo Las Vegas\",\n       \"address\": \"3555 S Las Vegas Blvd, Las Vegas, NV 89109\",\n       \"price_range\":\"$90-$220 per night\",\n      \"image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/1d/6f/a4/d6/flamingo-las-vegas.jpg\",\n      \"url\": \"https://www.caesars.com/flamingo-las-vegas\",\n      \"geo_coordinates\": {\n        \"latitude\": 36.1168,\n        \"longitude\": -115.1708\n      },\n      \"rating\": 3.8,\n     \"description\": \"An iconic hotel with a tropical theme, offering a wildlife habitat with flamingos, multiple pools, and a central location on the Strip.\"\n    }\n\n  ],\n   \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the South Strip\",\n      \"best_time_to_visit\": \"Morning and evening\",\n      \"plan\": [\n        {\n          \"place_name\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"place_details\": \"Iconic sign perfect for family photos.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Welcome_to_Las_Vegas_sign.jpg/640px-Welcome_to_Las_Vegas_sign.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.0824,\n            \"longitude\": -115.1727\n          },\n          \"ticket_pricing\": \"Free\",\n          \"rating\": 4.5,\n          \"time_travel\": \"20 min\"\n        },\n        {\n          \"place_name\": \"Excalibur Hotel & Casino\",\n          \"place_details\": \"Explore the castle-themed architecture, enjoy a family-friendly lunch, and arcade games.\",\n            \"image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/1d/87/4d/58/excalibur-hotel-casino.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.0997,\n            \"longitude\": -115.1745\n          },\n          \"ticket_pricing\": \"Free (arcade games are extra)\",\n            \"rating\": 4,\n          \"time_travel\": \"5 min\"\n        },\n        {\n          \"place_name\": \"Mandalay Bay Shark Reef Aquarium\",\n          \"place_details\": \"Observe various marine animals, including sharks and turtles.\",\n            \"image_url\":\"https://media-cdn.tripadvisor.com/media/photo-s/14/4d/6e/9d/shark-reef-aquarium-at.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.0916,\n            \"longitude\": -115.1753\n          },\n           \"ticket_pricing\": \"$29 per adult, $22 per child\",\n             \"rating\": 4.3,\n           \"time_travel\": \"10 min\"\n        },\n         {\n          \"place_name\": \"Bellagio Fountains\",\n          \"place_details\": \"Watch the free water show with music at night.\",\n           \"image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/1a/c0/b5/2d/bellagio-fountains.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1125,\n            \"longitude\": -115.1743\n          },\n          \"ticket_pricing\": \"Free\",\n            \"rating\": 4.8,\n             \"time_travel\": \"20 min\"\n        }\n       ]\n    },\n    \"day2\": {\n      \"theme\": \"Central Strip Fun\",\n       \"best_time_to_visit\": \"Afternoon and evening\",\n      \"plan\": [\n        {\n          \"place_name\": \"The LINQ Promenade\",\n            \"place_details\":\"Stroll through this open-air shopping, dining, and entertainment district.\",\n            \"image_url\":\"https://media-cdn.tripadvisor.com/media/photo-s/0c/3d/aa/16/the-linq-promenade.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1179,\n            \"longitude\": -115.1696\n          },\n           \"ticket_pricing\": \"Free (activities extra)\",\n            \"rating\": 4.4,\n           \"time_travel\": \"10 min\"\n        },\n        {\n          \"place_name\": \"High Roller Observation Wheel\",\n           \"place_details\": \"Take a ride on the giant ferris wheel for panoramic views of Las Vegas.\",\n            \"image_url\":\"https://media-cdn.tripadvisor.com/media/photo-s/1d/b1/b3/d9/high-roller-observation.jpg\",\n            \"geo_coordinates\": {\n            \"latitude\": 36.1177,\n            \"longitude\": -115.1695\n            },\n           \"ticket_pricing\": \"$28 per adult, $17 per child\",\n           \"rating\": 4.5,\n             \"time_travel\": \"5 min\"\n        },\n           {\n          \"place_name\": \"Flamingo Wildlife Habitat\",\n           \"place_details\":\"Visit the lush habitat with flamingos and other birds.\",\n           \"image_url\":\"https://media-cdn.tripadvisor.com/media/photo-s/12/55/41/3f/flamingo-wildlife-habitat.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1167,\n            \"longitude\": -115.1707\n          },\n          \"ticket_pricing\": \"Free\",\n           \"rating\": 4.2,\n          \"time_travel\": \"10 min\"\n        },\n        {\n          \"place_name\": \"Mirage Volcano\",\n          \"place_details\": \"Watch the free volcano show with fire and explosions.\",\n          \"image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/11/61/c6/f9/the-mirage-volcano.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1213,\n            \"longitude\": -115.1723\n          },\n          \"ticket_pricing\": \"Free\",\n           \"rating\": 4.6,\n           \"time_travel\":\"15 min\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Downtown & Shows\",\n      \"best_time_to_visit\": \"Afternoon and Evening\",\n      \"plan\": [\n        {\n          \"place_name\": \"Fremont Street Experience\",\n          \"place_details\": \"Experience the Viva Vision light show on the canopy and street performers.\",\n             \"image_url\":\"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Fremont_Street_Experience_Daytime_View.jpg/800px-Fremont_Street_Experience_Daytime_View.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1705,\n            \"longitude\": -115.1402\n          },\n          \"ticket_pricing\": \"Free\",\n           \"rating\": 4.3,\n            \"time_travel\": \"25 min\"\n        },\n          {\n          \"place_name\": \"Downtown Container Park\",\n             \"place_details\": \"Explore the unique shops, restaurants, and playground made from shipping containers.\",\n             \"image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/0f/c8/c0/5b/container-park.jpg\",\n           \"geo_coordinates\": {\n            \"latitude\": 36.1697,\n            \"longitude\": -115.1415\n          },\n          \"ticket_pricing\": \"Free (activities extra)\",\n             \"rating\": 4.2,\n             \"time_travel\": \"5 min\"\n        },\n        {\n          \"place_name\": \"Tournament of Kings Dinner Show (Excalibur)\",\n            \"place_details\":\"Enjoy a medieval-themed dinner show with jousting and feasting.\",\n             \"image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/18/4d/7f/30/tournament-of-kings-dinner.jpg\",\n          \"geo_coordinates\": {\n             \"latitude\": 36.0997,\n             \"longitude\": -115.1745\n             },\n          \"ticket_pricing\": \"$75-90 per person\",\n             \"rating\": 4.4,\n            \"time_travel\": \"30 min\"\n        }\n      ]\n    }\n  }\n}\n```"},
          ],
        },
      ],
    });
  